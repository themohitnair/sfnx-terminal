Metadata-Version: 2.1
Name: sfnx
Version: 0.1.9
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.7
Classifier: Programming Language :: Python :: 3.8
Classifier: Programming Language :: Python :: 3.9
Classifier: License :: OSI Approved :: MIT License
Classifier: Operating System :: OS Independent
Requires-Python: >=3.7
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: typer[all]<1.0,>=0.4
Requires-Dist: rich<13.0,>=10.0
Requires-Dist: cryptography<41.0,>=3.4
Requires-Dist: argon2-cffi<23.0,>=20.1
Requires-Dist: sqlmodel<0.1.0,>=0.0.4
Requires-Dist: pyperclip>=1.9.0

# sfnx

`sfnxterm` or `sfnx` is a minimal terminal-based password manager built using Python. It leverages the `Typer` CLI framework, `SQLModel` for database management, `Argon2` for key derivation, `AES` for encryption, and `SQLite` for storage.

## Features

- **Master Password**: Secure your password database with a single master password.
- **Encrypted Storage**: All passwords are encrypted using AES with a 256-bit key derived from your master password.
- **Simple Commands**: Easily initialize, add, delete, and view passwords from the terminal.

## Installation
sfnx uses a copy-paste mechanism to be able to retrieve passwords from the local database. You must have one installed. One example of such a mechanism is xclip. 
You can install it using the following command 

```sh
sudo pacman -S xclip
```

To install `sfnx-terminal`, use `pipx` to manage a global environment on your Linux machine:

```sh
sudo pacman -S pipx
pipx install sfnx
pipx ensurepath
source ~/.bashrc
```

## For existing users

If you encounter any bugs, please make sure to update the `sfnx` package using pipx

```sh
pipx upgrade sfnx
```

## Usage

### Commands

1. **`init`**:  
   - Initializes the password manager.
   - Prompts for a master password and a verification secret (e.g., your name or alias).
   - Stores the encrypted verification secret in the database.
   - If the database is already initialized, this command acts as a test to verify the master password.

   Example:
   ```sh
   sfnx init
   ```

2. **`addpass`**:  
   - Adds a new password to the encrypted database.
   - Requires a service name, username, and the password to store.
   - Passwords are encrypted with AES before being stored.

   Example:
   ```sh
   sfnx addpass
   ```

3. **`delpass`**:  
   - Deletes a password for a specific service and username combination.
   - Requires the master password for verification.

   Example:
   ```sh
   sfnx delpass
   ```

4. **`copypass`**:  
   - Retrieves and decrypts passwords for a specified service and username.
   - Displays the decrypted password in the terminal.

   Example:
   ```sh
   sfnx copypass
   ```

5. **`--help`**:  
   - Displays help information for the commands.

   Example:
   ```sh
   sfnx --help
   ```

### Security

- **Key Derivation**: The master password is processed using `Argon2`, a memory-hard key derivation function. This adds security against brute-force attacks.
  ```python
  key = low_level.hash_secret_raw(
      m_password.encode(),
      salt,
      time_cost=2,
      memory_cost=102400,
      parallelism=8,
      hash_len=32,
      type=Type.ID
  )
  ```
- **Encryption**: Passwords are encrypted using AES in CBC mode with PKCS7 padding. The encryption key is derived from the master password.
  ```python
  cipher = Cipher(algorithms.AES(key), modes.CBC(iv), backend=default_backend())
  ```
- **Database**: Passwords and secrets are stored in an SQLite database, with each record containing the service name, username, encrypted password, and a unique salt.

### Workflow

1. **Initialization**: On running `sfnx init`, the database is created and configured with the master password and verification secret. This configuration is stored securely using encryption.

2. **Adding Passwords**: When adding a password with `sfnx addpass`, the password is encrypted with AES, using a key derived from the master password and a unique salt.

3. **Retrieving Passwords**: With `sfnx copypass`, the stored encrypted password is decrypted and copied to your clipboard after verifying the master password.

4. **Deleting Passwords**: The `sfnx delpass` command removes the password entry corresponding to the service and username, provided the correct master password is entered.

## Repository

For more details, check out the [GitHub repository](https://github.com/themohitnair/sfnxterm).

- [LICENSE](https://github.com/themohitnair/sfnxterm/blob/main/LICENSE)

- [PyPI registry](https://pypi.org/project/sfnx/)
